import{r as v,o as R,b as i,c as u,f as e,i as a,y as r,h as _,q as x,u as f,R as C,F as b,z as L,A as $,B as q,C as S,m as A,s as w,T as Y,I,w as E,l as M,x as N,H as j,j as k,J as H,K as F,G as D,L as V,M as z}from"./index.51c47497.js";import{m as G}from"./marked.esm.ba7676eb.js";import{d as T}from"./dayjs.min.82740e12.js";import{A as J}from"./AppFooter.c5b29d52.js";import{_ as O}from"./Comment.d65ea00c.js";import"./ULoading.5b6f27d6.js";const U={class:"mx-4 mt-12 hidden text-center text-light lg:block"},K={class:"text-3xl"},W={class:"f-c-c py-2"},P=e("span",{class:"i-mdi:calendar mr-1 text-lg"},null,-1),Q=e("span",{class:"px-2"},"|",-1),X=e("span",{class:"i-mdi:update mr-1 text-lg"},null,-1),Z=e("span",{class:"px-2"},"|",-1),ee=e("span",{class:"i-material-symbols:menu mr-1 text-lg"},null,-1),te={class:"f-c-c"},se=e("span",{class:"i-ic:twotone-text-snippet mr-1 text-lg"},null,-1),le=e("span",{class:"px-2"},"|",-1),ae=e("span",{class:"i-mdi:timelapse mr-1 text-lg"},null,-1),ce=e("span",{class:"px-2"},"|",-1),oe=e("span",{class:"i-mdi:eye mr-1 text-lg"},null,-1),ne=e("span",{class:"px-2"},"|",-1),ie=e("span",{class:"i-ic:outline-insert-comment mr-1 text-lg"},null,-1),re={class:"mx-4 mt-12 block text-left text-light lg:hidden space-y-1.5"},de={class:"text-2xl"},ue={class:"mb-1 mt-2 flex flex-wrap items-center lg:justify-center"},_e=e("span",{class:"i-mdi:calendar mr-1"},null,-1),me=e("span",{class:"px-2"},"|",-1),pe=e("span",{class:"i-mdi:update mr-1"},null,-1),he={class:"flex gap-2"},fe={class:"f-c-c"},xe=e("span",{class:"i-material-symbols:menu mr-1"},null,-1),ge={class:"border-1px border-blue rounded-xl px-2 py-1 text-sm text-white"},ve=e("span",{class:"i-ic:twotone-text-snippet mr-1"},null,-1),be=e("span",{class:"px-2"},"|",-1),$e=e("span",{class:"i-mdi:timelapse mr-1"},null,-1),ye=e("span",{class:"i-mdi:eye mr-1"},null,-1),we=e("span",{class:"px-2"},"|",-1),ke=e("span",{class:"i-ic:outline-insert-comment mr-1"},null,-1),Le={__name:"BannerInfo",props:{article:{}},setup(t){const{article:s}=t,o=v(0),c=v("");R(()=>{o.value=l(s.content).length,c.value=`${Math.round(o.value/400)}\u5206\u949F`});function l(g){return g.replace(/<\/?[^>]*>/g,"").replace(/[|]*\n/,"").replace(/&npsp;/gi,"")}function n(g){return T(g).format("YYYY-MM-DD")}return(g,y)=>(i(),u(b,null,[e("div",U,[e("h1",K,a(t.article.title),1),e("p",W,[P,r(" \u53D1\u5E03\u4E8E "+a(n(t.article.created_at))+" ",1),Q,X,r(" \u66F4\u65B0\u4E8E "+a(n(t.article.updated_at))+" ",1),Z,_(f(C),{to:`/categories/${t.article.category.id}?name=${t.article.category.name}`,class:"f-c-c"},{default:x(()=>[ee,r(" "+a(t.article.category.name),1)]),_:1},8,["to"])]),e("div",te,[se,r(" \u5B57\u6570\u7EDF\u8BA1\uFF1A"+a(o.value)+" ",1),le,ae,r(" \u9605\u8BFB\u65F6\u957F\uFF1A"+a(c.value)+" ",1),ce,oe,r(" \u9605\u8BFB\u91CF\uFF1A"+a(t.article.view_count)+" ",1),ne,ie,r(" \u8BC4\u8BBA\u6570\uFF1A"+a(t.article.comment_count),1)])]),e("div",re,[e("h1",de,a(t.article.title),1),e("div",ue,[_e,r(" \u53D1\u5E03\u4E8E "+a(n(t.article.created_at))+" ",1),me,pe,r(" \u66F4\u65B0\u4E8E "+a(n(t.article.updated_at)),1)]),e("div",he,[e("div",fe,[_(f(C),{to:`/categories/${t.article.category.id}?name=${t.article.category.name}`},{default:x(()=>[xe,r(" "+a(t.article.category.name),1)]),_:1},8,["to"])]),(i(!0),u(b,null,L(t.article.tags,m=>(i(),$(f(C),{key:m.id,to:`/tags/${m.id}?name=${m.name}`},{default:x(()=>[e("span",ge,a(m.name),1)]),_:2},1032,["to"]))),128))]),e("div",null,[ve,r(" \u5B57\u6570\u7EDF\u8BA1\uFF1A"+a(o.value)+" ",1),be,$e,r(" \u9605\u8BFB\u65F6\u957F\uFF1A"+a(c.value),1)]),e("div",null,[ye,r(" \u9605\u8BFB\u91CF\uFF1A"+a(t.article.view_count)+" ",1),we,ke,r(" \u8BC4\u8BBA\u6570\uFF1A"+a(t.article.comment_count),1)])])],64))}},Ae={class:"border-1 border-lightblue border-dashed px-4 py-3 leading-7"},Ce={class:"relative"},Re=e("div",{class:"absolute right-0 top-0 h-5 w-5 border-4px border-blue rounded-full bg-white"},null,-1),Te=e("span",{class:"font-bold color-#49b1f5"}," \u6587\u7AE0\u4F5C\u8005\uFF1A ",-1),Se=e("span",{class:"font-bold color-#49b1f5"}," \u6587\u7AE0\u94FE\u63A5\uFF1A ",-1),Ye=["href"],Me=e("div",null,[e("span",{class:"font-bold color-#49b1f5"}," \u7248\u6743\u58F0\u660E\uFF1A "),e("span",null,[r(" \u672C\u535A\u5BA2\u6240\u6709\u6587\u7AE0\u9664\u7279\u522B\u58F0\u660E\u5916\uFF0C\u5747\u91C7\u7528 "),e("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",class:"color-#99a9bf !underline"}," CC BY-NC-SA 4.0 "),r(" \u8BB8\u53EF\u534F\u8BAE\u3002\u8F6C\u8F7D\u8BF7\u6CE8\u660E\u6587\u7AE0\u51FA\u5904\u3002 ")])],-1),Ne={__name:"Copyright",setup(t){const{blogConfig:s}=q(S()),o=window.location.href;return(c,l)=>{const n=A("RouterLink");return i(),u("div",Ae,[e("div",Ce,[Re,Te,_(n,{to:"/",class:"color-#99a9bf !underline"},{default:x(()=>[r(a(f(s).website_author),1)]),_:1})]),e("div",null,[Se,e("a",{href:f(o),class:"color-#99a9bf !underline"},a(f(o)),9,Ye)]),Me])}}},je={class:"card-view space-y-3"},De=e("div",{class:"flex items-center"},[e("span",{class:"i-akar-icons:clock"}),e("span",{class:"ml-2"}," \u6700\u65B0\u6587\u7AE0 ")],-1),Be={class:"space-y-1"},qe={class:"flex items-center"},Ie=["src"],Ee={class:"flex-1 overflow-hidden break-all pl-2"},He={class:"text-sm text-blueGray"},Fe={__name:"LatestList",props:{articleList:Array},setup(t){return(s,o)=>{const c=A("RouterLink");return i(),$(Y,{name:"slide-fade",appear:""},{default:x(()=>[e("div",je,[De,e("ul",Be,[(i(!0),u(b,null,L(t.articleList,l=>(i(),u("li",{key:l.title,class:"p-1 hover:bg-gray-200"},[_(c,{to:`/article/${l.id}`,class:"border-b-1 border-dashed last:border-none"},{default:x(()=>[e("div",qe,[e("img",{src:f(w)(l.img),class:"h-15 w-15 overflow-hidden"},null,8,Ie),e("div",Ee,[e("p",null,a(l.title),1),e("p",He,a(f(T)(l.created_at).format("YYYY-MM-DD")),1)])])]),_:2},1032,["to"])]))),128))])])]),_:1})}}},Ve={class:"f-c-c color-#fff space-x-4"},ze=e("span",{class:"i-mdi:thumb-up mr-1"},null,-1),Ge=e("span",{class:"i-mdi:qrcode mr-1"},null,-1),Je={__name:"Reward",props:{articleId:Number,likeCount:Number},setup(t){const{articleId:s,likeCount:o}=t,[c,l]=[I(),S()],n=v(o);E(()=>o,d=>n.value=d);async function g(){var d,h;if(!c.userId){l.setLoginFlag(!0);return}try{await j.saveLikeArticle(s),c.articleLikeSet.includes(s)?(n.value--,(d=window.$message)==null||d.info("\u5DF2\u53D6\u6D88")):(n.value++,(h=window.$message)==null||h.success("\u5DF2\u70B9\u8D5E")),c.articleLike(s)}catch(p){console.error(p)}}const y=M(()=>c.articleLikeSet.includes(s));function m(){var d;(d=window.$message)==null||d.info("\u6682\u65F6\u4E0D\u652F\u6301\u6253\u8D4F\u529F\u80FD")}return(d,h)=>(i(),u("div",Ve,[e("button",{class:N(["w-[110px] f-c-c rounded-sm py-1.5 text-sm",y.value?"bg-red":"bg-gray"]),onClick:g},[ze,r(" \u70B9\u8D5E "+a(n.value),1)],2),e("button",{class:"w-[110px] f-c-c rounded-sm bg-blue py-1.5 text-sm",onClick:m},[Ge,r(" \u6253\u8D4F ")])]))}},Oe={class:"flex items-center justify-between"},Ue={class:"space-x-2"},Ke={class:"border-1px border-blue rounded-xl px-2 py-1 text-xs color-#49b1f5 lg:text-sm"},We=e("span",{class:"i-mdi:wechat cursor-pointer text-green"},null,-1),Pe=e("span",{class:"i-mdi:sina-weibo cursor-pointer text-orange"},null,-1),Qe=e("span",{class:"i-mdi:qqchat cursor-pointer text-red"},null,-1),Xe=e("span",{class:"i-mdi:telegram cursor-pointer text-blue"},null,-1),Ze=[We,Pe,Qe,Xe],et={__name:"Forward",props:{tagList:{type:Array,default:()=>[]}},setup(t){function s(){var o;(o=window.$message)==null||o.info("\u6682\u65F6\u4E0D\u652F\u6301\u5206\u4EAB\u529F\u80FD")}return(o,c)=>{const l=A("RouterLink");return i(),u("div",Oe,[e("div",Ue,[(i(!0),u(b,null,L(t.tagList,n=>(i(),$(l,{key:n.id,to:`/tags/${n.id}?name=${n.name}`},{default:x(()=>[e("span",Ke,a(n.name),1)]),_:2},1032,["to"]))),128))]),e("div",{class:"flex justify-between text-xl space-x-2",onClick:s},Ze)])}}},tt={class:"flex flex-wrap bg-#000 text-white lg:flex-nowrap"},st={key:0,class:"group relative h-[150px] w-full overflow-hidden"},lt=["src"],at={class:"absolute top-1/2 w-full px-10 text-left leading-6 -translate-y-1/2"},ct=e("p",null," \u4E0A\u4E00\u7BC7 ",-1),ot={key:1,class:"group relative h-[150px] w-full overflow-hidden"},nt=["src"],it={class:"absolute top-1/2 w-full px-10 text-right leading-6 -translate-y-1/2"},rt=e("p",null," \u4E0B\u4E00\u7BC7 ",-1),dt={__name:"LastNext",props:{lastArticle:{},nextArticle:{}},setup(t){return(s,o)=>{const c=A("RouterLink");return i(),u("div",tt,[t.lastArticle.id?(i(),u("div",st,[_(c,{to:`/article/${t.lastArticle.id}`},{default:x(()=>[e("img",{src:f(w)(t.lastArticle.img),class:"h-full w-full object-cover opacity-40 transition-600 group-hover:scale-110 group-hover:opacity-80"},null,8,lt),e("div",at,[ct,e("p",null,a(t.lastArticle.title),1)])]),_:1},8,["to"])])):k("",!0),t.nextArticle.id?(i(),u("div",ot,[_(c,{to:`/article/${t.nextArticle.id}`},{default:x(()=>[e("img",{src:f(w)(t.nextArticle.img),class:"h-full w-full object-cover opacity-40 transition-600 group-hover:scale-110 group-hover:opacity-80"},null,8,nt),e("div",it,[rt,e("p",null,a(t.nextArticle.title),1)])]),_:1},8,["to"])])):k("",!0)])}}},ut={key:0,class:"space-y-3"},_t=e("p",{class:"flex items-center text-xl font-bold"},[e("span",{class:"i-mdi:thumb-up mr-3 text-orange"}),r(" \u76F8\u5173\u63A8\u8350 ")],-1),mt={class:"grid grid-cols-12 gap-1.5"},pt={class:"relative h-[150px] f-c-c overflow-hidden rounded bg-black lg:h-[200px]"},ht=["src"],ft={class:"absolute text-center text-white"},xt={class:"f-c-c"},gt=e("span",{class:"i-mdi:calendar mr-1"},null,-1),vt={__name:"Recommend",props:{recommendList:Array},setup(t){return(s,o)=>{const c=A("RouterLink");return t.recommendList.length?(i(),u("div",ut,[_t,e("div",mt,[(i(!0),u(b,null,L(t.recommendList,l=>(i(),u("div",{key:l.id,class:"group col-span-12 lg:col-span-4"},[_(c,{to:`/article/${l.id}`},{default:x(()=>[e("div",pt,[e("img",{src:f(w)(l.img),class:"h-full w-full object-cover opacity-40 transition-600 group-hover:scale-110 group-hover:opacity-80"},null,8,ht),e("div",ft,[e("p",xt,[gt,r(" "+a(f(T)(l.created_at).format("YYYY-MM-DD")),1)]),e("p",null,a(l.title),1)])])]),_:2},1032,["to"])]))),128))])])):k("",!0)}}},bt={class:"card-view space-y-2"},$t=e("div",{class:"flex items-center"},[e("span",{class:"i-fa-solid:list-ul"}),e("span",{class:"ml-2"},"\u76EE\u5F55")],-1),yt=["onClick"],wt={__name:"Catalogue",props:{preview:{type:Object,required:!0}},setup(t){const{preview:s}=t;R(()=>{s&&n()});const o=v(""),c=v([]),l=Array.from(s.querySelectorAll("h1,h2,h3,h4,h5,h6"));function n(){const m=Array.from(l).filter(p=>!!p.innerText.trim()),d=Array.from(new Set(m.map(p=>p.tagName))).sort();let h=0;for(let p=0;p<l.length;p++){const B=l[p].textContent.trim();l[p].id=`${B}-${h++}`,c.value.push({id:l[p].id,name:l[p].innerText,indent:d.indexOf(l[p].tagName)})}}function g(m){const d=document.getElementById(m);window.scrollTo({behavior:"smooth",top:d.offsetTop-40}),setTimeout(()=>o.value=m,600)}const{y}=H();return F(y,()=>{c.value.forEach(m=>{const d=l.find(h=>h.id===m.id);d&&y.value>=d.offsetTop-50&&(o.value=d.id)})},{throttle:200}),(m,d)=>(i(),$(Y,{name:"slide-fade",appear:""},{default:x(()=>[e("div",bt,[$t,e("ul",null,[(i(!0),u(b,null,L(c.value,h=>(i(),u("li",{key:h.id},[e("div",{class:N(["cursor-pointer border-l-4 border-transparent rounded py-1 text-sm color-#666261 hover:bg-#00c4b6 hover:bg-opacity-30",h.id===o.value&&"bg-#00c4b6 text-white border-l-#009d92"]),style:D({paddingLeft:`${5+h.indent*15}px`}),onClick:p=>g(h.id)},a(h.name),15,yt)]))),128))])])]),_:1}))}},kt={class:"flex-1"},Lt={class:"card-fade-up grid grid-cols-12 mx-auto mb-3 mt-[380px] gap-4 px-1 lg:mt-[440px] lg:max-w-[1200px]"},At={class:"card-view col-span-12 mx-2 pt-7 lg:col-span-9 lg:mx-0"},Ct=["innerHTML"],Rt=e("hr",{class:"my-10 border-2 border-color-#d2ebfd border-dashed lg:mx-5"},null,-1),Tt={class:"col-span-0 lg:col-span-3"},St={class:"sticky top-5 hidden lg:block space-y-4"},qt={__name:"index",setup(t){const s=v({id:0,title:"",content:"",created_at:"",updated_at:"",like_count:0,view_count:0,comment_count:0,img:"",newest_articles:[],tags:[],category:{},next_article:{},last_article:{},recommend_articles:[]}),o=v(null),c=v(!0);R(()=>{j.getArticleDetail(+V().params.id).then(n=>{s.value=n.data}).finally(()=>{c.value=!1}),setTimeout(()=>{document.querySelectorAll("pre code").forEach(n=>z.highlightElement(n))},300)});const l=M(()=>s.value.img?`background: url('${w(s.value.img)}') center center / cover no-repeat;`:"background: rgba(0,0,0,0.1) center center / cover no-repeat;");return(n,g)=>(i(),u(b,null,[e("div",{style:D(l.value),class:"banner-fade-down absolute inset-x-0 top-0 h-[360px] f-c-c lg:h-[400px]"},[c.value?k("",!0):(i(),$(Le,{key:0,article:s.value},null,8,["article"]))],4),e("main",kt,[e("div",Lt,[e("div",At,[e("article",{ref_key:"previewRef",ref:o,class:"max-w-none prose prose-truegray lg:mx-10",innerHTML:f(G)(s.value.content)},null,8,Ct),_(Ne,{class:"my-5 lg:mx-5"}),_(et,{"tag-list":s.value.tags,class:"mb-12 lg:mx-5"},null,8,["tag-list"]),_(Je,{"article-id":s.value.id,"like-count":s.value.like_count,class:"mb-10"},null,8,["article-id","like-count"]),_(dt,{"last-article":s.value.last_article,"next-article":s.value.next_article,class:"lg:mx-5"},null,8,["last-article","next-article"]),_(vt,{"recommend-list":s.value.recommend_articles,class:"mt-7 lg:mx-5"},null,8,["recommend-list"]),Rt,_(O,{type:1,class:"lg:mx-5"})]),e("div",Tt,[e("div",St,[c.value?k("",!0):(i(),$(wt,{key:0,preview:o.value},null,8,["preview"])),_(Fe,{"article-list":s.value.newest_articles},null,8,["article-list"])])])])]),e("footer",null,[_(J)])],64))}};export{qt as default};
