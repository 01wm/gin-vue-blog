import{k as h,x as B,o as F,c as I,w as i,m as p,a as r,b as k,u as e,l as S,y as z,d as _,z as s,b1 as L,N as d,A as D,B as g}from"./index-7e9df7d9.js";import{_ as R}from"./CommonPage-7491aea4.js";import{_ as V}from"./QueryItem-0f282244.js";import{_ as O}from"./CrudModal-d60ad9bd.js";import{_ as P}from"./CrudTable-121684b7.js";import{u as A}from"./useCRUD-f64dec52.js";import{N as K}from"./Image-77507ba9.js";import{N as u}from"./Input-5db271d7.js";import{N as T,a as f}from"./FormItem-e99f0659.js";import{N as j}from"./Popconfirm-6b45faf2.js";import"./AppPage-848b5b84.js";import"./Space-f54cd109.js";import"./RadioGroup-757891b8.js";import"./get-slot-1efb97e5.js";import"./Checkbox-ac1591ea.js";import"./Forward-8d8448e7.js";import"./utils-3c01791b.js";const E=_("span",{class:"i-material-symbols:add"},null,-1),M=_("span",{class:"i-material-symbols:playlist-remove"},null,-1),ue=Object.assign({name:"友链管理"},{__name:"index",setup(G){const n=h(null),m=h({keyword:""}),{modalVisible:v,modalTitle:w,modalLoading:N,handleAdd:x,handleDelete:y,handleEdit:U,handleSave:C,modalForm:o,modalFormRef:q}=A({name:"友链",initForm:{},doCreate:p.saveOrUpdateLink,doDelete:p.deleteLinks,doUpdate:p.saveOrUpdateLink,refresh:()=>{var a;return(a=n.value)==null?void 0:a.handleSearch()}});B(()=>{var a;(a=n.value)==null||a.handleSearch()});const $=[{type:"selection",width:15,fixed:"left"},{title:"头像",key:"avatar",width:40,align:"center",render(a){return s(K,{height:40,imgProps:{style:{"border-radius":"3px"}},src:a.avatar,"fallback-src":"http://dummyimage.com/400x400","show-toolbar-tooltip":!0})}},{title:"链接名称",key:"name",width:100,align:"center",ellipsis:{tooltip:!0}},{title:"链接地址",key:"address",width:120,align:"center",ellipsis:{tooltip:!0},render(a){return s("a",{class:"hover:underline hover:underline-blue-500 hover:underline-2 hover:underline-solid hover:underline-offset-4 cursor-pointer",onClick:()=>{const{copy:t}=L();t(a.address),$message.info("链接已经复制到剪切板!")}},a.address)}},{title:"链接介绍",key:"intro",width:120,align:"center",ellipsis:{tooltip:!0}},{title:"创建日期",key:"created_at",width:80,align:"center",render(a){return s(d,{size:"small",type:"text",ghost:!0},{default:()=>D(a.created_at),icon:g("mdi:clock-time-three-outline",{size:17})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(a){return[s(d,{size:"small",type:"primary",onClick:()=>U(a)},{default:()=>"编辑",icon:g("material-symbols:edit-outline",{})}),s(j,{onPositiveClick:()=>y([a.id],!1)},{trigger:()=>s(d,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:g("material-symbols:delete-outline",{})}),default:()=>s("div",{},"确定删除该分类吗?")})]}}];return(a,t)=>(F(),I(R,{title:"友链管理"},{action:i(()=>{var l;return[r(e(d),{type:"primary",onClick:e(x)},{icon:i(()=>[E]),default:i(()=>[k(" 新建友链 ")]),_:1},8,["onClick"]),r(e(d),{type:"error",disabled:!((l=n.value)!=null&&l.selections.length),onClick:t[0]||(t[0]=c=>{var b;return e(y)((b=n.value)==null?void 0:b.selections)})},{icon:i(()=>[M]),default:i(()=>[k(" 批量删除 ")]),_:1},8,["disabled"])]}),default:i(()=>[r(P,{ref_key:"$table",ref:n,"query-items":m.value,"onUpdate:queryItems":t[3]||(t[3]=l=>m.value=l),columns:$,"get-data":e(p).getLinks},{queryBar:i(()=>[r(V,{label:"友链名","label-width":50},{default:i(()=>[r(e(u),{value:m.value.keyword,"onUpdate:value":t[1]||(t[1]=l=>m.value.keyword=l),clearable:"",type:"text",placeholder:"请输入友链名",onKeydown:t[2]||(t[2]=S(l=>{var c;return(c=n.value)==null?void 0:c.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),r(O,{visible:e(v),"onUpdate:visible":t[8]||(t[8]=l=>z(v)?v.value=l:null),title:e(w),loading:e(N),onSave:e(C)},{default:i(()=>[r(e(T),{ref_key:"modalFormRef",ref:q,"label-placement":"left","label-align":"left","label-width":80,model:e(o)},{default:i(()=>[r(e(f),{label:"链接名称",path:"name",rule:{required:!0,message:"请输入友链名称",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(o).name,"onUpdate:value":t[4]||(t[4]=l=>e(o).name=l),placeholder:"请输入友链名称"},null,8,["value"])]),_:1}),r(e(f),{label:"链接头像",path:"avatar",rule:{required:!0,message:"请输入友链头像",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(o).avatar,"onUpdate:value":t[5]||(t[5]=l=>e(o).avatar=l),placeholder:"请输入链接头像"},null,8,["value"])]),_:1}),r(e(f),{label:"链接地址",path:"address",rule:{required:!0,message:"请输入友链地址",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(o).address,"onUpdate:value":t[6]||(t[6]=l=>e(o).address=l),placeholder:"请输入链接地址"},null,8,["value"])]),_:1}),r(e(f),{label:"链接介绍",path:"intro",rule:{required:!0,message:"请输入友链介绍",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(o).intro,"onUpdate:value":t[7]||(t[7]=l=>e(o).intro=l),placeholder:"请输入友链地址"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{ue as default};
