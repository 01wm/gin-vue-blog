import{e as b,p as $,o as F,f as S,w as i,l as p,j as r,h,i as e,k as B,q as I,g as k,s as o,aX as L,N as d,v as D}from"./index-7d3bcf57.js";import{_ as R}from"./CommonPage-60900c13.js";import{_ as V}from"./QueryItem-c84c912a.js";import{_ as z}from"./CrudModal-d5d9f5ee.js";import{_ as O}from"./CrudTable-706359a4.js";import{u as P}from"./useCRUD-87b8d7a3.js";import{N as j}from"./Image-da15fe39.js";import{N as u}from"./Input-41b621cb.js";import{N as K,a as f}from"./FormItem-f3617c31.js";import{N as T}from"./Popconfirm-a41de709.js";import"./AppPage-e3cb8e40.js";import"./Space-dcdf9175.js";import"./RadioGroup-64dd0ada.js";import"./get-slot-1efb97e5.js";import"./Checkbox-b4c2fca7.js";import"./Forward-47c9bfa7.js";import"./utils-540fee40.js";const A=k("span",{class:"i-material-symbols:add"},null,-1),E=k("span",{class:"i-material-symbols:playlist-remove"},null,-1),de=Object.assign({name:"友链管理"},{__name:"index",setup(M){const n=b(null),m=b({keyword:""}),{modalVisible:v,modalTitle:_,modalLoading:w,handleAdd:N,handleDelete:g,handleEdit:x,handleSave:U,modalForm:s,modalFormRef:q}=P({name:"友链",initForm:{},doCreate:p.saveOrUpdateLink,doDelete:p.deleteLinks,doUpdate:p.saveOrUpdateLink,refresh:()=>{var a;return(a=n.value)==null?void 0:a.handleSearch()}});$(()=>{var a;(a=n.value)==null||a.handleSearch()});const C=[{type:"selection",width:15,fixed:"left"},{title:"头像",key:"avatar",width:40,align:"center",render(a){return o(j,{height:40,imgProps:{style:{"border-radius":"3px"}},src:a.avatar,"fallback-src":"http://dummyimage.com/400x400","show-toolbar-tooltip":!0})}},{title:"链接名称",key:"name",width:100,align:"center",ellipsis:{tooltip:!0}},{title:"链接地址",key:"address",width:120,align:"center",ellipsis:{tooltip:!0},render(a){return o("a",{class:"hover:underline hover:underline-blue-500 hover:underline-2 hover:underline-solid hover:underline-offset-4 cursor-pointer",onClick:()=>{const{copy:t}=L();t(a.address),$message.info("链接已经复制到剪切板!")}},a.address)}},{title:"链接介绍",key:"intro",width:120,align:"center",ellipsis:{tooltip:!0}},{title:"创建日期",key:"created_at",width:80,align:"center",render(a){return o(d,{size:"small",type:"text",ghost:!0},{default:()=>D(a.created_at),icon:()=>o("i",{class:"i-mdi:clock-time-three-outline"})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(a){return[o(d,{size:"small",type:"primary",onClick:()=>x(a)},{default:()=>"编辑",icon:()=>o("i",{class:"i-material-symbols:edit-outline"})}),o(T,{onPositiveClick:()=>g([a.id],!1)},{trigger:()=>o(d,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:()=>o("i",{class:"i-material-symbols:delete-outline"})}),default:()=>o("div",{},"确定删除该分类吗?")})]}}];return(a,t)=>(F(),S(R,{title:"友链管理"},{action:i(()=>{var l;return[r(e(d),{type:"primary",onClick:e(N)},{icon:i(()=>[A]),default:i(()=>[h(" 新建友链 ")]),_:1},8,["onClick"]),r(e(d),{type:"error",disabled:!((l=n.value)!=null&&l.selections.length),onClick:t[0]||(t[0]=c=>{var y;return e(g)((y=n.value)==null?void 0:y.selections)})},{icon:i(()=>[E]),default:i(()=>[h(" 批量删除 ")]),_:1},8,["disabled"])]}),default:i(()=>[r(O,{ref_key:"$table",ref:n,"query-items":m.value,"onUpdate:queryItems":t[3]||(t[3]=l=>m.value=l),columns:C,"get-data":e(p).getLinks},{queryBar:i(()=>[r(V,{label:"友链名","label-width":50},{default:i(()=>[r(e(u),{value:m.value.keyword,"onUpdate:value":t[1]||(t[1]=l=>m.value.keyword=l),clearable:"",type:"text",placeholder:"请输入友链名",onKeydown:t[2]||(t[2]=B(l=>{var c;return(c=n.value)==null?void 0:c.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),r(z,{visible:e(v),"onUpdate:visible":t[8]||(t[8]=l=>I(v)?v.value=l:null),title:e(_),loading:e(w),onSave:e(U)},{default:i(()=>[r(e(K),{ref_key:"modalFormRef",ref:q,"label-placement":"left","label-align":"left","label-width":80,model:e(s)},{default:i(()=>[r(e(f),{label:"链接名称",path:"name",rule:{required:!0,message:"请输入友链名称",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(s).name,"onUpdate:value":t[4]||(t[4]=l=>e(s).name=l),placeholder:"请输入友链名称"},null,8,["value"])]),_:1}),r(e(f),{label:"链接头像",path:"avatar",rule:{required:!0,message:"请输入友链头像",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(s).avatar,"onUpdate:value":t[5]||(t[5]=l=>e(s).avatar=l),placeholder:"请输入链接头像"},null,8,["value"])]),_:1}),r(e(f),{label:"链接地址",path:"address",rule:{required:!0,message:"请输入友链地址",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(s).address,"onUpdate:value":t[6]||(t[6]=l=>e(s).address=l),placeholder:"请输入链接地址"},null,8,["value"])]),_:1}),r(e(f),{label:"链接介绍",path:"intro",rule:{required:!0,message:"请输入友链介绍",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(s).intro,"onUpdate:value":t[7]||(t[7]=l=>e(s).intro=l),placeholder:"请输入友链地址"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{de as default};
