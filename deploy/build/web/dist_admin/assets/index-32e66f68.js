import{e as _,p as q,o as F,f as S,w as l,l as p,j as o,h as y,i as e,k as B,q as z,g as v,s as r,N as n,v as b}from"./index-7d3bcf57.js";import{_ as D}from"./CommonPage-60900c13.js";import{_ as I}from"./QueryItem-c84c912a.js";import{_ as R}from"./CrudModal-d5d9f5ee.js";import{_ as V}from"./CrudTable-706359a4.js";import{u as O}from"./useCRUD-87b8d7a3.js";import{N as h}from"./Input-41b621cb.js";import{N as j,a as E}from"./FormItem-f3617c31.js";import{N as K}from"./Popconfirm-a41de709.js";import"./AppPage-e3cb8e40.js";import"./Space-dcdf9175.js";import"./RadioGroup-64dd0ada.js";import"./get-slot-1efb97e5.js";import"./Checkbox-b4c2fca7.js";import"./Forward-47c9bfa7.js";const P=v("i",{class:"i-mdi:download"},null,-1),T=v("i",{class:"i-material-symbols:add"},null,-1),A=v("span",{class:"i-material-symbols:playlist-remove"},null,-1),re=Object.assign({name:"分类管理"},{__name:"index",setup(L){const s=_(null),m=_({keyword:""});q(()=>{var a;(a=s.value)==null||a.handleSearch()});const{modalVisible:f,modalTitle:k,modalLoading:w,handleAdd:C,handleDelete:g,handleEdit:x,handleSave:N,modalForm:c,modalFormRef:$}=O({name:"分类",initForm:{},doCreate:p.saveOrUpdateCategory,doDelete:p.deleteCategory,doUpdate:p.saveOrUpdateCategory,refresh:()=>{var a;return(a=s.value)==null?void 0:a.handleSearch()}}),U=[{type:"selection",width:15,fixed:"left"},{title:"分类名",key:"name",width:100,align:"center",ellipsis:{tooltip:!0}},{title:"文章量",key:"article_count",width:30,align:"center"},{title:"创建日期",key:"created_at",width:80,align:"center",render(a){return r(n,{size:"small",type:"text",ghost:!0},{default:()=>b(a.created_at),icon:()=>r("i",{class:"i-mdi:clock-time-three-outline"})})}},{title:"更新日期",key:"updated_at",width:80,align:"center",render(a){return r(n,{size:"small",type:"text",ghost:!0},{default:()=>b(a.updated_at),icon:()=>r("i",{class:"i-mdi:update"})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(a){return[r(n,{size:"small",type:"primary",onClick:()=>x(a)},{default:()=>"编辑",icon:()=>r("i",{class:"i-material-symbols:edit-outline"})}),r(K,{onPositiveClick:()=>g([a.id],!1)},{trigger:()=>r(n,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:()=>r("i",{class:"i-material-symbols:delete-outline"})}),default:()=>r("div",{},"确定删除该分类吗?")})]}}];return(a,t)=>(F(),S(D,{title:"分类管理"},{action:l(()=>{var i;return[o(e(n),{type:"primary",secondary:"",onClick:t[0]||(t[0]=u=>{var d;return(d=s.value)==null?void 0:d.handleExport()})},{icon:l(()=>[P]),default:l(()=>[y(" 导出 ")]),_:1}),o(e(n),{type:"primary",onClick:e(C)},{icon:l(()=>[T]),default:l(()=>[y(" 新建分类 ")]),_:1},8,["onClick"]),o(e(n),{type:"error",disabled:!((i=s.value)!=null&&i.selections.length),onClick:t[1]||(t[1]=u=>{var d;return e(g)((d=s.value)==null?void 0:d.selections)})},{icon:l(()=>[A]),default:l(()=>[y(" 批量删除 ")]),_:1},8,["disabled"])]}),default:l(()=>[o(V,{ref_key:"$table",ref:s,"query-items":m.value,"onUpdate:queryItems":t[4]||(t[4]=i=>m.value=i),columns:U,"get-data":e(p).getCategorys},{queryBar:l(()=>[o(I,{label:"分类名","label-width":50},{default:l(()=>[o(e(h),{value:m.value.keyword,"onUpdate:value":t[2]||(t[2]=i=>m.value.keyword=i),clearable:"",type:"text",placeholder:"请输入分类名",onKeydown:t[3]||(t[3]=B(i=>{var u;return(u=s.value)==null?void 0:u.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),o(R,{visible:e(f),"onUpdate:visible":t[6]||(t[6]=i=>z(f)?f.value=i:null),title:e(k),loading:e(w),onSave:e(N)},{default:l(()=>[o(e(j),{ref_key:"modalFormRef",ref:$,"label-placement":"left","label-align":"left","label-width":80,model:e(c)},{default:l(()=>[o(e(E),{label:"文章分类",path:"name",rule:{required:!0,message:"请输入分类名称",trigger:["input","blur"]}},{default:l(()=>[o(e(h),{value:e(c).name,"onUpdate:value":t[5]||(t[5]=i=>e(c).name=i),placeholder:"请输入分类名称",clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{re as default};
