import{e as k,f as I,g as L,h as N,r as S,i as q,j as B,k as R,o as U,c as $,w as g,n as j,d as e,b as f,t as C,u as n,a as r,l as V,_ as A,N as D,m as K,s as T,p as z,q as F,v as G}from"./index-7e9df7d9.js";import{_ as P}from"./AppPage-848b5b84.js";import{N as _}from"./Input-5db271d7.js";import{N as Y}from"./Checkbox-ac1591ea.js";const E="/admin/image/login_banner.webp",H={style:{transform:"translateY(25px)"},class:"m-auto max-w-700 min-w-345 flex items-center justify-center rounded-10 bg-white bg-opacity-60 p-15 shadow"},J=e("div",{class:"hidden w-380 px-20 py-35 md:block"},[e("img",{src:E,class:"w-full",alt:"login_banner"})],-1),M={class:"w-320 flex flex-col px-20 py-35"},O={class:"flex items-center justify-center text-24 font-normal text-gray"},Q=e("img",{src:A,alt:"logo",class:"mr-10 h-50 w-50"},null,-1),W={class:"mt-30"},X={class:"mt-30"},Z={class:"mt-20"},ee={class:"mt-20"},le={__name:"Login",setup(se){const h="Gin Blog Admin",w=k(),y=I(),d=L(),{query:l}=N(),s=S({username:"test@qq.com",password:"11111"});v();function v(){const t=q("loginInfo");t&&(s.username=t.username,s.password=t.password)}const i=B("isRemember",!1),c=R(!1);async function u(){const{username:t,password:o}=s;if(!t||!o){$message.warning("请输入用户名和密码");return}(async(m,p)=>{c.value=!0,$message.loading("正在验证...");try{const x=await K.login({username:m,password:p});if(T(x.data.token),$message.success("登录成功"),await w.getUserInfo(),await y.getBlogInfo(),i?z("loginInfo",{username:m,password:p}):F("loginInfo"),await G(),l.redirect){const b=l.redirect;Reflect.deleteProperty(l,"redirect"),d.push({path:b,query:l})}else d.push("/")}finally{c.value=!1}})(t,o)}return(t,o)=>(U(),$(P,{class:"bg-cover",style:j({backgroundImage:"url(/image/login_bg.webp)"})},{default:g(()=>[e("div",H,[J,e("div",M,[e("h5",O,[Q,f(" "+C(n(h)),1)]),e("div",W,[r(n(_),{value:s.username,"onUpdate:value":o[0]||(o[0]=a=>s.username=a),class:"autofocus h-50 items-center pl-10 text-16",placeholder:"test@qq.com",maxlength:20},null,8,["value"])]),e("div",X,[r(n(_),{value:s.password,"onUpdate:value":o[1]||(o[1]=a=>s.password=a),class:"h-50 items-center pl-10 text-16",type:"password","show-password-on":"mousedown",placeholder:"11111",maxlength:20,onKeydown:V(u,["enter"])},null,8,["value"])]),e("div",Z,[r(n(Y),{checked:n(i),label:"记住我","on-update:checked":a=>i.value=a},null,8,["checked","on-update:checked"])]),e("div",ee,[r(n(D),{class:"h-50 w-full rounded-5 text-16",type:"primary",loading:c.value,onClick:u},{default:g(()=>[f(" 登录 ")]),_:1},8,["loading"])])])])]),_:1},8,["style"]))}};export{le as default};
