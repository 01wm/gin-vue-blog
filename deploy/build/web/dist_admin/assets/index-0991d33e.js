import{_ as c}from"./CommonPage-7491aea4.js";import{_ as m}from"./CrudTable-121684b7.js";import{k as p,x as d,o as u,c as f,w as g,a as _,u as h,z as t,E as w,m as a,A as y,B as s,N as n}from"./index-7e9df7d9.js";import{N as k}from"./Image-77507ba9.js";import{N as b}from"./Popconfirm-6b45faf2.js";import"./AppPage-848b5b84.js";import"./Space-f54cd109.js";import"./Input-5db271d7.js";import"./RadioGroup-757891b8.js";import"./get-slot-1efb97e5.js";import"./Checkbox-ac1591ea.js";import"./Forward-8d8448e7.js";import"./utils-3c01791b.js";const E=Object.assign({name:"在线用户"},{__name:"index",setup(x){const r=p(null);d(()=>{var e;(e=r.value)==null||e.handleSearch()});const o=[{title:"头像",key:"avatar",width:40,align:"center",render(e){return t(k,{height:40,imgProps:{style:{"border-radius":"1px"}},src:w(e.avatar),"fallback-src":"http://dummyimage.com/400x400","show-toolbar-tooltip":!0})}},{title:"昵称",key:"nickname",width:60,align:"center",ellipsis:{tooltip:!0}},{title:"登录 IP",key:"ip_address",width:70,align:"center",ellipsis:{tooltip:!0},render(e){return t("span",e.ip_address||"未知")}},{title:"登录地址",key:"ip_source",width:70,align:"center",ellipsis:{tooltip:!0},render(e){return t("span",e.ip_source||"未知")}},{title:"登录浏览器",key:"browser",width:70,align:"center",ellipsis:{tooltip:!0},render(e){return t("span",e.browser||"未知")}},{title:"操作系统",key:"os",width:70,align:"center",ellipsis:{tooltip:!0},render(e){return t("span",e.os||"未知")}},{title:"登录时间",key:"last_login_time",align:"center",width:70,render(e){return t(n,{size:"small",type:"text",ghost:!0},{default:()=>y(e.last_login_time),icon:s("mdi:update",{size:18})})}},{title:"操作",key:"actions",width:60,align:"center",fixed:"right",render(e){return t(b,{onPositiveClick:()=>l(e)},{trigger:()=>t(n,{size:"small",type:"primary"},{default:()=>"下线",icon:s("material-symbols:delete-outline",{})}),default:()=>t("div",{},"确定强制该用户下线吗?")})}}];async function l(e){var i;try{await a.forceOfflineUser(e),window.$message.success("该用户已被强制下线!"),(i=r.value)==null||i.handleSearch()}catch{window.$message.error("强制下线失败!")}}return(e,i)=>(u(),f(c,{title:"在线用户"},{default:g(()=>[_(m,{ref_key:"$table",ref:r,columns:o,"get-data":h(a).getOnlineUsers},null,8,["get-data"])]),_:1}))}});export{E as default};
