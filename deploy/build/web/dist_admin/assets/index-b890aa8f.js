import{k as b,x as q,o as B,c as F,w as l,m as p,a as r,b as v,u as e,l as S,y as I,d as _,z as s,N as n,A as h,B as f}from"./index-7e9df7d9.js";import{_ as D}from"./CommonPage-7491aea4.js";import{_ as R}from"./QueryItem-0f282244.js";import{_ as V}from"./CrudModal-d60ad9bd.js";import{_ as O}from"./CrudTable-121684b7.js";import{u as A}from"./useCRUD-f64dec52.js";import{N as k}from"./Input-5db271d7.js";import{N as E,a as K}from"./FormItem-e99f0659.js";import{N as P}from"./Popconfirm-6b45faf2.js";import"./AppPage-848b5b84.js";import"./Space-f54cd109.js";import"./RadioGroup-757891b8.js";import"./get-slot-1efb97e5.js";import"./Checkbox-ac1591ea.js";import"./Forward-8d8448e7.js";const T=_("i",{class:"i-mdi:download"},null,-1),j=_("i",{class:"i-material-symbols:add"},null,-1),L=_("span",{class:"i-material-symbols:playlist-remove"},null,-1),ne=Object.assign({name:"分类管理"},{__name:"index",setup(M){const o=b(null),m=b({keyword:""});q(()=>{var a;(a=o.value)==null||a.handleSearch()});const{modalVisible:c,modalTitle:w,modalLoading:x,handleAdd:C,handleDelete:g,handleEdit:N,handleSave:z,modalForm:y,modalFormRef:$}=A({name:"分类",initForm:{},doCreate:p.saveOrUpdateCategory,doDelete:p.deleteCategory,doUpdate:p.saveOrUpdateCategory,refresh:()=>{var a;return(a=o.value)==null?void 0:a.handleSearch()}}),U=[{type:"selection",width:15,fixed:"left"},{title:"分类名",key:"name",width:100,align:"center",ellipsis:{tooltip:!0}},{title:"文章量",key:"article_count",width:30,align:"center"},{title:"创建日期",key:"created_at",width:80,align:"center",render(a){return s(n,{size:"small",type:"text",ghost:!0},{default:()=>h(a.created_at),icon:f("mdi:clock-time-three-outline",{size:17})})}},{title:"更新日期",key:"updated_at",width:80,align:"center",render(a){return s(n,{size:"small",type:"text",ghost:!0},{default:()=>h(a.updated_at),icon:f("mdi:update",{size:18})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(a){return[s(n,{size:"small",type:"primary",onClick:()=>N(a)},{default:()=>"编辑",icon:f("material-symbols:edit-outline",{size:16})}),s(P,{onPositiveClick:()=>g([a.id],!1)},{trigger:()=>s(n,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:f("material-symbols:delete-outline",{size:16})}),default:()=>s("div",{},"确定删除该分类吗?")})]}}];return(a,t)=>(B(),F(D,{title:"分类管理"},{action:l(()=>{var i;return[r(e(n),{type:"primary",secondary:"",onClick:t[0]||(t[0]=u=>{var d;return(d=o.value)==null?void 0:d.handleExport()})},{icon:l(()=>[T]),default:l(()=>[v(" 导出 ")]),_:1}),r(e(n),{type:"primary",onClick:e(C)},{icon:l(()=>[j]),default:l(()=>[v(" 新建分类 ")]),_:1},8,["onClick"]),r(e(n),{type:"error",disabled:!((i=o.value)!=null&&i.selections.length),onClick:t[1]||(t[1]=u=>{var d;return e(g)((d=o.value)==null?void 0:d.selections)})},{icon:l(()=>[L]),default:l(()=>[v(" 批量删除 ")]),_:1},8,["disabled"])]}),default:l(()=>[r(O,{ref_key:"$table",ref:o,"query-items":m.value,"onUpdate:queryItems":t[4]||(t[4]=i=>m.value=i),columns:U,"get-data":e(p).getCategorys},{queryBar:l(()=>[r(R,{label:"分类名","label-width":50},{default:l(()=>[r(e(k),{value:m.value.keyword,"onUpdate:value":t[2]||(t[2]=i=>m.value.keyword=i),clearable:"",type:"text",placeholder:"请输入分类名",onKeydown:t[3]||(t[3]=S(i=>{var u;return(u=o.value)==null?void 0:u.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),r(V,{visible:e(c),"onUpdate:visible":t[6]||(t[6]=i=>I(c)?c.value=i:null),title:e(w),loading:e(x),onSave:e(z)},{default:l(()=>[r(e(E),{ref_key:"modalFormRef",ref:$,"label-placement":"left","label-align":"left","label-width":80,model:e(y)},{default:l(()=>[r(e(K),{label:"文章分类",path:"name",rule:{required:!0,message:"请输入分类名称",trigger:["input","blur"]}},{default:l(()=>[r(e(k),{value:e(y).name,"onUpdate:value":t[5]||(t[5]=i=>e(y).name=i),placeholder:"请输入分类名称",clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{ne as default};
