import{e as g,p as q,o as T,f as F,w as i,l as m,j as o,h as v,i as t,k as z,q as B,g as b,s as r,N as s,z as D,v as _}from"./index-cfa27ed4.js";import{_ as I}from"./CommonPage-4f39ed42.js";import{_ as R}from"./QueryItem-d17f875d.js";import{_ as V}from"./CrudModal-388e823f.js";import{_ as O}from"./CrudTable-f7b664e6.js";import{u as j}from"./useCRUD-d1880a98.js";import{N as h}from"./Input-9d39db42.js";import{N as K,a as P}from"./FormItem-0c6ab39e.js";import{N as A}from"./Popconfirm-c434d7b3.js";import"./AppPage-a5c29498.js";import"./Space-c006c775.js";import"./RadioGroup-3711a790.js";import"./get-slot-1efb97e5.js";import"./Checkbox-13b79107.js";import"./Forward-d629ea4a.js";const E=b("i",{class:"i-material-symbols:add"},null,-1),L=b("span",{class:"i-material-symbols:playlist-remove"},null,-1),ne=Object.assign({name:"标签管理"},{__name:"index",setup(M){const n=g(null),d=g({keyword:""});q(()=>{var e;(e=n.value)==null||e.handleSearch()});const{modalVisible:u,modalTitle:k,modalLoading:w,handleAdd:N,handleDelete:c,handleEdit:x,handleSave:C,modalForm:p,modalFormRef:S}=j({name:"标签",initForm:{},doCreate:m.saveOrUpdateTag,doDelete:m.deleteTag,doUpdate:m.saveOrUpdateTag,refresh:()=>{var e;return(e=n.value)==null?void 0:e.handleSearch()}}),U=[{type:"selection",width:15,fixed:"left"},{title:"标签名",key:"name",width:100,align:"center",render(e){return r(D,{type:"info"},{default:()=>e.name})}},{title:"文章量",key:"article_count",width:30,align:"center"},{title:"创建日期",key:"created_at",width:80,align:"center",render(e){return r(s,{size:"small",type:"text",ghost:!0},{default:()=>_(e.created_at),icon:()=>r("i",{class:"i-mdi:clock-time-three-outline"})})}},{title:"更新日期",key:"updated_at",width:80,align:"center",render(e){return r(s,{size:"small",type:"text",ghost:!0},{default:()=>_(e.updated_at),icon:()=>r("i",{class:"i-mdi:update"})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(e){return[r(s,{size:"small",type:"primary",onClick:()=>x(e)},{default:()=>"编辑",icon:()=>r("i",{class:"i-material-symbols:edit-outline"})}),r(A,{onPositiveClick:()=>c([e.id],!1)},{trigger:()=>r(s,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:()=>r("i",{class:"i-material-symbols:delete-outline"})}),default:()=>r("div",{},"确定删除该标签吗?")})]}}];function $(e){}return(e,a)=>(T(),F(I,{title:"标签管理"},{action:i(()=>{var l;return[o(t(s),{type:"primary",onClick:t(N)},{icon:i(()=>[E]),default:i(()=>[v(" 新建标签 ")]),_:1},8,["onClick"]),o(t(s),{type:"error",disabled:!((l=n.value)!=null&&l.selections.length),onClick:a[0]||(a[0]=f=>{var y;return t(c)((y=n.value)==null?void 0:y.selections)})},{icon:i(()=>[L]),default:i(()=>[v(" 批量删除 ")]),_:1},8,["disabled"])]}),default:i(()=>[o(O,{ref_key:"$table",ref:n,"query-items":d.value,"onUpdate:queryItems":a[3]||(a[3]=l=>d.value=l),columns:U,"get-data":t(m).getTags,onSorterChange:$},{queryBar:i(()=>[o(R,{label:"标签名","label-width":50},{default:i(()=>[o(t(h),{value:d.value.keyword,"onUpdate:value":a[1]||(a[1]=l=>d.value.keyword=l),clearable:"",type:"text",placeholder:"请输入标签名",onKeydown:a[2]||(a[2]=z(l=>{var f;return(f=n.value)==null?void 0:f.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),o(V,{visible:t(u),"onUpdate:visible":a[5]||(a[5]=l=>B(u)?u.value=l:null),title:t(k),loading:t(w),onSave:t(C)},{default:i(()=>[o(t(K),{ref_key:"modalFormRef",ref:S,"label-placement":"left","label-align":"left","label-width":80,model:t(p)},{default:i(()=>[o(t(P),{label:"文章标签",path:"name",rule:{required:!0,message:"请输入标签名称",trigger:["input","blur"]}},{default:i(()=>[o(t(h),{value:t(p).name,"onUpdate:value":a[4]||(a[4]=l=>t(p).name=l),placeholder:"请输入标签名称",clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{ne as default};
