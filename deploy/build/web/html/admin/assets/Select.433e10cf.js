import{m as e,z as n,bb as o,bc as t,ac as l,am as r,j as i,r as a,be as s,bf as d,aT as u,i as c,k as p,l as h,V as v,n as b,p as f,Q as g,R as m,q as x,v as w,x as C,N as y,az as S,aM as F,bg as z,ab as O,bh as M,T as R,a6 as T,a7 as P,b1 as k,Z as $,bi as B,a4 as A,aR as D,ah as I,af as L,bj as E,ai as H,a1 as _,aj as N,a0 as j,aD as W,aA as V,a2 as K,ae as U,bk as q,bl as G,aH as Z,ak as J,a9 as Q,aB as Y,bm as X,aa as ee,bn as ne,aJ as oe,bo as te,bp as le,bq as re,br as ie,bs as ae,bt as se,bu as de,bv as ue,ao as ce}from"./index.9c865cdf.js";import{u as pe,N as he}from"./Input.463ffced.js";import{F as ve,V as be}from"./RadioGroup.42efc504.js";function fe(e){switch(e){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error(`${e} has no smaller size.`)}function ge(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function me(e){const n=e.filter((e=>void 0!==e));if(0!==n.length)return 1===n.length?n[0]:n=>{e.forEach((e=>{e&&e(n)}))}}const xe="v-hidden",we=s("[v-hidden]",{display:"none!important"}),Ce=e({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(e,{slots:r}){const i=n(null),a=n(null);function s(){const{value:n}=i,{getCounter:o,getTail:t}=e;let l;if(l=void 0!==o?o():a.value,!n||!l)return;l.hasAttribute(xe)&&l.removeAttribute(xe);const{children:s}=n,d=n.offsetWidth,u=[],c=r.tail?null==t?void 0:t():null;let p=c?c.offsetWidth:0,h=!1;const v=n.children.length-(r.tail?1:0);for(let r=0;r<v-1;++r){if(r<0)continue;const n=s[r];if(h){n.hasAttribute(xe)||n.setAttribute(xe,"");continue}n.hasAttribute(xe)&&n.removeAttribute(xe);const o=n.offsetWidth;if(p+=o,u[r]=o,p>d){const{updateCounter:n}=e;for(let e=r;e>=0;--e){const o=v-1-e;void 0!==n?n(o):l.textContent=`${o}`;const t=l.offsetWidth;if(p-=u[e],p+t<=d||0===e){h=!0,r=e-1,c&&(-1===r?(c.style.maxWidth=d-t+"px",c.style.boxSizing="border-box"):c.style.maxWidth="");break}}}}const{onUpdateOverflow:b}=e;h?void 0!==b&&b(!0):(void 0!==b&&b(!1),l.setAttribute(xe,""))}const d=o();return we.mount({id:"vueuc/overflow",head:!0,anchorMetaName:t,ssr:d}),l(s),{selfRef:i,counterRef:a,sync:s}},render(){const{$slots:e}=this;return r(this.sync),i("div",{class:"v-overflow",ref:"selfRef"},[a(e,"default"),e.counter?e.counter():i("span",{style:{display:"inline-block"},ref:"counterRef"}),e.tail?e.tail():null])}});function ye(e,n){n&&(l((()=>{const{value:o}=e;o&&d.registerHandler(o,n)})),u((()=>{const{value:n}=e;n&&d.unregisterHandler(n)})))}const Se=e({name:"Checkmark",render:()=>i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},i("g",{fill:"none"},i("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}),Fe=e({name:"Empty",render:()=>i("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),i("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}),ze={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"},Oe={name:"Empty",common:c,self:e=>{const{textColorDisabled:n,iconColor:o,textColor2:t,fontSizeSmall:l,fontSizeMedium:r,fontSizeLarge:i,fontSizeHuge:a}=e;return Object.assign(Object.assign({},ze),{fontSizeSmall:l,fontSizeMedium:r,fontSizeLarge:i,fontSizeHuge:a,textColor:n,iconColor:o,extraTextColor:t})}},Me=p("empty","\n display: flex;\n flex-direction: column;\n align-items: center;\n font-size: var(--n-font-size);\n",[h("icon","\n width: var(--n-icon-size);\n height: var(--n-icon-size);\n font-size: var(--n-icon-size);\n line-height: var(--n-icon-size);\n color: var(--n-icon-color);\n transition:\n color .3s var(--n-bezier);\n ",[v("+",[h("description","\n margin-top: 8px;\n ")])]),h("description","\n transition: color .3s var(--n-bezier);\n color: var(--n-text-color);\n "),h("extra","\n text-align: center;\n transition: color .3s var(--n-bezier);\n margin-top: 12px;\n color: var(--n-extra-text-color);\n ")]),Re=e({name:"Empty",props:Object.assign(Object.assign({},f.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:o}=b(e),t=f("Empty","-empty",Me,Oe,e,n),{localeRef:l}=pe("Empty"),r=g(m,null),a=x((()=>{var n,o,t;return null!==(n=e.description)&&void 0!==n?n:null===(t=null===(o=null==r?void 0:r.mergedComponentPropsRef.value)||void 0===o?void 0:o.Empty)||void 0===t?void 0:t.description})),s=x((()=>{var e,n;return(null===(n=null===(e=null==r?void 0:r.mergedComponentPropsRef.value)||void 0===e?void 0:e.Empty)||void 0===n?void 0:n.renderIcon)||(()=>i(Fe,null))})),d=x((()=>{const{size:n}=e,{common:{cubicBezierEaseInOut:o},self:{[w("iconSize",n)]:l,[w("fontSize",n)]:r,textColor:i,iconColor:a,extraTextColor:s}}=t.value;return{"--n-icon-size":l,"--n-font-size":r,"--n-bezier":o,"--n-text-color":i,"--n-icon-color":a,"--n-extra-text-color":s}})),u=o?C("empty",x((()=>{let n="";const{size:o}=e;return n+=o[0],n})),d,e):void 0;return{mergedClsPrefix:n,mergedRenderIcon:s,localizedDescription:x((()=>a.value||l.value.description)),cssVars:o?void 0:d,themeClass:null==u?void 0:u.themeClass,onRender:null==u?void 0:u.onRender}},render(){const{$slots:e,mergedClsPrefix:n,onRender:o}=this;return null==o||o(),i("div",{class:[`${n}-empty`,this.themeClass],style:this.cssVars},this.showIcon?i("div",{class:`${n}-empty__icon`},e.icon?e.icon():i(y,{clsPrefix:n},{default:this.mergedRenderIcon})):null,this.showDescription?i("div",{class:`${n}-empty__description`},e.default?e.default():this.localizedDescription):null,e.extra?i("div",{class:`${n}-empty__extra`},e.extra()):null)}}),Te={height:"calc(var(--n-option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"},Pe=S({name:"InternalSelectMenu",common:c,peers:{Scrollbar:F,Empty:Oe},self:e=>{const{borderRadius:n,popoverColor:o,textColor3:t,dividerColor:l,textColor2:r,primaryColorPressed:i,textColorDisabled:a,primaryColor:s,opacityDisabled:d,hoverColor:u,fontSizeSmall:c,fontSizeMedium:p,fontSizeLarge:h,fontSizeHuge:v,heightSmall:b,heightMedium:f,heightLarge:g,heightHuge:m}=e;return Object.assign(Object.assign({},Te),{optionFontSizeSmall:c,optionFontSizeMedium:p,optionFontSizeLarge:h,optionFontSizeHuge:v,optionHeightSmall:b,optionHeightMedium:f,optionHeightLarge:g,optionHeightHuge:m,borderRadius:n,color:o,groupHeaderTextColor:t,actionDividerColor:l,optionTextColor:r,optionTextColorPressed:i,optionTextColorDisabled:a,optionTextColorActive:s,optionOpacityDisabled:d,optionCheckColor:s,optionColorPending:u,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:u,actionTextColor:r,loadingColor:s})}});const ke=e({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:n,pendingTmNodeRef:o,multipleRef:t,valueSetRef:l,renderLabelRef:r,renderOptionRef:i,labelFieldRef:a,valueFieldRef:s,showCheckmarkRef:d,nodePropsRef:u,handleOptionClick:c,handleOptionMouseEnter:p}=g(z),h=O((()=>{const{value:n}=o;return!!n&&e.tmNode.key===n.key}));return{multiple:t,isGrouped:O((()=>{const{tmNode:n}=e,{parent:o}=n;return o&&"group"===o.rawNode.type})),showCheckmark:d,nodeProps:u,isPending:h,isSelected:O((()=>{const{value:o}=n,{value:r}=t;if(null===o)return!1;const i=e.tmNode.rawNode[s.value];if(r){const{value:e}=l;return e.has(i)}return o===i})),labelField:a,renderLabel:r,renderOption:i,handleMouseMove:function(n){const{tmNode:o}=e,{value:t}=h;o.disabled||t||p(n,o)},handleMouseEnter:function(n){const{tmNode:o}=e;o.disabled||p(n,o)},handleClick:function(n){const{tmNode:o}=e;o.disabled||c(n,o)}}},render(){const{clsPrefix:e,tmNode:{rawNode:n},isSelected:o,isPending:t,isGrouped:l,showCheckmark:r,nodeProps:a,renderOption:s,renderLabel:d,handleClick:u,handleMouseEnter:c,handleMouseMove:p}=this,h=function(e,n){return i(R,{name:"fade-in-scale-up-transition"},{default:()=>e?i(y,{clsPrefix:n,class:`${n}-base-select-option__check`},{default:()=>i(Se)}):null})}(o,e),v=d?[d(n,o),r&&h]:[M(n[this.labelField],n,o),r&&h],b=null==a?void 0:a(n),f=i("div",Object.assign({},b,{class:[`${e}-base-select-option`,n.class,null==b?void 0:b.class,{[`${e}-base-select-option--disabled`]:n.disabled,[`${e}-base-select-option--selected`]:o,[`${e}-base-select-option--grouped`]:l,[`${e}-base-select-option--pending`]:t,[`${e}-base-select-option--show-checkmark`]:r}],style:[(null==b?void 0:b.style)||"",n.style||""],onClick:me([u,null==b?void 0:b.onClick]),onMouseenter:me([c,null==b?void 0:b.onMouseenter]),onMousemove:me([p,null==b?void 0:b.onMousemove])}),i("div",{class:`${e}-base-select-option__content`},v));return n.render?n.render({node:f,option:n,selected:o}):s?s({node:f,option:n,selected:o}):f}}),$e=e({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:n,labelFieldRef:o,nodePropsRef:t}=g(z);return{labelField:o,nodeProps:t,renderLabel:e,renderOption:n}},render(){const{clsPrefix:e,renderLabel:n,renderOption:o,nodeProps:t,tmNode:{rawNode:l}}=this,r=null==t?void 0:t(l),a=n?n(l,!1):M(l[this.labelField],l,!1),s=i("div",Object.assign({},r,{class:[`${e}-base-select-group-header`,null==r?void 0:r.class]}),a);return l.render?l.render({node:s,option:l}):o?o({node:s,option:l,selected:!1}):s}}),Be=p("base-select-menu","\n line-height: 1.5;\n outline: none;\n z-index: 0;\n position: relative;\n border-radius: var(--n-border-radius);\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n background-color: var(--n-color);\n",[p("scrollbar","\n max-height: var(--n-height);\n "),p("virtual-list","\n max-height: var(--n-height);\n "),p("base-select-option","\n min-height: var(--n-option-height);\n font-size: var(--n-option-font-size);\n display: flex;\n align-items: center;\n ",[h("content","\n z-index: 1;\n white-space: nowrap;\n text-overflow: ellipsis;\n overflow: hidden;\n ")]),p("base-select-group-header","\n min-height: var(--n-option-height);\n font-size: .93em;\n display: flex;\n align-items: center;\n "),p("base-select-menu-option-wrapper","\n position: relative;\n width: 100%;\n "),h("loading, empty","\n display: flex;\n padding: 12px 32px;\n flex: 1;\n justify-content: center;\n "),h("loading","\n color: var(--n-loading-color);\n font-size: var(--n-loading-size);\n "),h("action","\n padding: 8px var(--n-option-padding-left);\n font-size: var(--n-option-font-size);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n border-top: 1px solid var(--n-action-divider-color);\n color: var(--n-action-text-color);\n "),p("base-select-group-header","\n position: relative;\n cursor: default;\n padding: var(--n-option-padding);\n color: var(--n-group-header-text-color);\n "),p("base-select-option","\n cursor: pointer;\n position: relative;\n padding: var(--n-option-padding);\n transition:\n color .3s var(--n-bezier),\n opacity .3s var(--n-bezier);\n box-sizing: border-box;\n color: var(--n-option-text-color);\n opacity: 1;\n ",[T("show-checkmark","\n padding-right: calc(var(--n-option-padding-right) + 20px);\n "),v("&::before",'\n content: "";\n position: absolute;\n left: 4px;\n right: 4px;\n top: 0;\n bottom: 0;\n border-radius: var(--n-border-radius);\n transition: background-color .3s var(--n-bezier);\n '),v("&:active","\n color: var(--n-option-text-color-pressed);\n "),T("grouped","\n padding-left: calc(var(--n-option-padding-left) * 1.5);\n "),T("pending",[v("&::before","\n background-color: var(--n-option-color-pending);\n ")]),T("selected","\n color: var(--n-option-text-color-active);\n ",[v("&::before","\n background-color: var(--n-option-color-active);\n "),T("pending",[v("&::before","\n background-color: var(--n-option-color-active-pending);\n ")])]),T("disabled","\n cursor: not-allowed;\n ",[P("selected","\n color: var(--n-option-text-color-disabled);\n "),T("selected","\n opacity: var(--n-option-opacity-disabled);\n ")]),h("check","\n font-size: 16px;\n position: absolute;\n right: calc(var(--n-option-padding-right) - 4px);\n top: calc(50% - 7px);\n color: var(--n-option-check-color);\n transition: color .3s var(--n-bezier);\n ",[k({enterScale:"0.5"})])])]),Ae=e({name:"InternalSelectMenu",props:Object.assign(Object.assign({},f.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const o=f("InternalSelectMenu","-internal-select-menu",Be,Pe,e,$(e,"clsPrefix")),t=n(null),i=n(null),a=n(null),s=x((()=>e.treeMate.getFlattenedNodes())),d=x((()=>B(s.value))),c=n(null);function p(){const{value:n}=c;n&&!e.treeMate.getNode(n.key)&&(c.value=null)}let h;A((()=>e.show),(n=>{n?h=A((()=>e.treeMate),(()=>{e.resetMenuOnOptionsChange?(e.autoPending?function(){const{treeMate:n}=e;let o=null;const{value:t}=e;null===t?o=n.getFirstAvailableNode():(o=e.multiple?n.getNode((t||[])[(t||[]).length-1]):n.getNode(t),o&&!o.disabled||(o=n.getFirstAvailableNode())),S(o||null)}():p(),r(F)):p()}),{immediate:!0}):null==h||h()}),{immediate:!0}),u((()=>{null==h||h()}));const v=x((()=>D(o.value.self[w("optionHeight",e.size)]))),b=x((()=>I(o.value.self[w("padding",e.size)]))),g=x((()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set)),m=x((()=>{const e=s.value;return e&&0===e.length}));function y(n){const{onScroll:o}=e;o&&o(n)}function S(e,n=!1){c.value=e,n&&F()}function F(){var n,o;const t=c.value;if(!t)return;const l=d.value(t.key);null!==l&&(e.virtualScroll?null===(n=i.value)||void 0===n||n.scrollTo({index:l}):null===(o=a.value)||void 0===o||o.scrollTo({index:l,elSize:v.value}))}L(z,{handleOptionMouseEnter:function(e,n){n.disabled||S(n,!1)},handleOptionClick:function(n,o){o.disabled||function(n){const{onToggle:o}=e;o&&o(n)}(o)},valueSetRef:g,pendingTmNodeRef:c,nodePropsRef:$(e,"nodeProps"),showCheckmarkRef:$(e,"showCheckmark"),multipleRef:$(e,"multiple"),valueRef:$(e,"value"),renderLabelRef:$(e,"renderLabel"),renderOptionRef:$(e,"renderOption"),labelFieldRef:$(e,"labelField"),valueFieldRef:$(e,"valueField")}),L(E,t),l((()=>{const{value:e}=a;e&&e.sync()}));const O=x((()=>{const{size:n}=e,{common:{cubicBezierEaseInOut:t},self:{height:l,borderRadius:r,color:i,groupHeaderTextColor:a,actionDividerColor:s,optionTextColorPressed:d,optionTextColor:u,optionTextColorDisabled:c,optionTextColorActive:p,optionOpacityDisabled:h,optionCheckColor:v,actionTextColor:b,optionColorPending:f,optionColorActive:g,loadingColor:m,loadingSize:x,optionColorActivePending:C,[w("optionFontSize",n)]:y,[w("optionHeight",n)]:S,[w("optionPadding",n)]:F}}=o.value;return{"--n-height":l,"--n-action-divider-color":s,"--n-action-text-color":b,"--n-bezier":t,"--n-border-radius":r,"--n-color":i,"--n-option-font-size":y,"--n-group-header-text-color":a,"--n-option-check-color":v,"--n-option-color-pending":f,"--n-option-color-active":g,"--n-option-color-active-pending":C,"--n-option-height":S,"--n-option-opacity-disabled":h,"--n-option-text-color":u,"--n-option-text-color-active":p,"--n-option-text-color-disabled":c,"--n-option-text-color-pressed":d,"--n-option-padding":F,"--n-option-padding-left":I(F,"left"),"--n-option-padding-right":I(F,"right"),"--n-loading-color":m,"--n-loading-size":x}})),{inlineThemeDisabled:M}=e,R=M?C("internal-select-menu",x((()=>e.size[0])),O,e):void 0,T={selfRef:t,next:function(){const{value:e}=c;e&&S(e.getNext({loop:!0}),!0)},prev:function(){const{value:e}=c;e&&S(e.getPrev({loop:!0}),!0)},getPendingTmNode:function(){const{value:e}=c;return e||null}};return ye(t,e.onResize),Object.assign({mergedTheme:o,virtualListRef:i,scrollbarRef:a,itemSize:v,padding:b,flattenedNodes:s,empty:m,virtualListContainer(){const{value:e}=i;return null==e?void 0:e.listElRef},virtualListContent(){const{value:e}=i;return null==e?void 0:e.itemsElRef},doScroll:y,handleFocusin:function(n){var o,l;(null===(o=t.value)||void 0===o?void 0:o.contains(n.target))&&(null===(l=e.onFocus)||void 0===l||l.call(e,n))},handleFocusout:function(n){var o,l;(null===(o=t.value)||void 0===o?void 0:o.contains(n.relatedTarget))||null===(l=e.onBlur)||void 0===l||l.call(e,n)},handleKeyUp:function(n){var o;W(n,"action")||null===(o=e.onKeyup)||void 0===o||o.call(e,n)},handleKeyDown:function(n){var o;W(n,"action")||null===(o=e.onKeydown)||void 0===o||o.call(e,n)},handleMouseDown:function(n){var o;null===(o=e.onMousedown)||void 0===o||o.call(e,n),e.focusable||n.preventDefault()},handleVirtualListResize:function(){var e;null===(e=a.value)||void 0===e||e.sync()},handleVirtualListScroll:function(e){var n;null===(n=a.value)||void 0===n||n.sync(),y(e)},cssVars:M?void 0:O,themeClass:null==R?void 0:R.themeClass,onRender:null==R?void 0:R.onRender},T)},render(){const{$slots:e,virtualScroll:n,clsPrefix:o,mergedTheme:t,themeClass:l,onRender:r}=this;return null==r||r(),i("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${o}-base-select-menu`,l,this.multiple&&`${o}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},this.loading?i("div",{class:`${o}-base-select-menu__loading`},i(_,{clsPrefix:o,strokeWidth:20})):this.empty?i("div",{class:`${o}-base-select-menu__empty`,"data-empty":!0},j(e.empty,(()=>[i(Re,{theme:t.peers.Empty,themeOverrides:t.peerOverrides.Empty})]))):i(N,{ref:"scrollbarRef",theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,scrollable:this.scrollable,container:n?this.virtualListContainer:void 0,content:n?this.virtualListContent:void 0,onScroll:n?void 0:this.doScroll},{default:()=>n?i(be,{ref:"virtualListRef",class:`${o}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:e})=>e.isGroup?i($e,{key:e.key,clsPrefix:o,tmNode:e}):e.ignored?null:i(ke,{clsPrefix:o,key:e.key,tmNode:e})}):i("div",{class:`${o}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map((e=>e.isGroup?i($e,{key:e.key,clsPrefix:o,tmNode:e}):i(ke,{clsPrefix:o,key:e.key,tmNode:e}))))}),H(e.action,(e=>e&&[i("div",{class:`${o}-base-select-menu__action`,"data-action":!0,key:"action"},e),i(ve,{onFocus:this.onTabOut,key:"focus-detector"})])))}}),De={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"},Ie=S({name:"InternalSelection",common:c,peers:{Popover:V},self:e=>{const{borderRadius:n,textColor2:o,textColorDisabled:t,inputColor:l,inputColorDisabled:r,primaryColor:i,primaryColorHover:a,warningColor:s,warningColorHover:d,errorColor:u,errorColorHover:c,borderColor:p,iconColor:h,iconColorDisabled:v,clearColor:b,clearColorHover:f,clearColorPressed:g,placeholderColor:m,placeholderColorDisabled:x,fontSizeTiny:w,fontSizeSmall:C,fontSizeMedium:y,fontSizeLarge:S,heightTiny:F,heightSmall:z,heightMedium:O,heightLarge:M}=e;return Object.assign(Object.assign({},De),{fontSizeTiny:w,fontSizeSmall:C,fontSizeMedium:y,fontSizeLarge:S,heightTiny:F,heightSmall:z,heightMedium:O,heightLarge:M,borderRadius:n,textColor:o,textColorDisabled:t,placeholderColor:m,placeholderColorDisabled:x,color:l,colorDisabled:r,colorActive:l,border:`1px solid ${p}`,borderHover:`1px solid ${a}`,borderActive:`1px solid ${i}`,borderFocus:`1px solid ${a}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${K(i,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${K(i,{alpha:.2})}`,caretColor:i,arrowColor:h,arrowColorDisabled:v,loadingColor:i,borderWarning:`1px solid ${s}`,borderHoverWarning:`1px solid ${d}`,borderActiveWarning:`1px solid ${s}`,borderFocusWarning:`1px solid ${d}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${K(s,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${K(s,{alpha:.2})}`,colorActiveWarning:l,caretColorWarning:s,borderError:`1px solid ${u}`,borderHoverError:`1px solid ${c}`,borderActiveError:`1px solid ${u}`,borderFocusError:`1px solid ${c}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${K(u,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${K(u,{alpha:.2})}`,colorActiveError:l,caretColorError:u,clearColor:b,clearColorHover:f,clearColorPressed:g})}}),Le=v([p("base-selection","\n position: relative;\n z-index: auto;\n box-shadow: none;\n width: 100%;\n max-width: 100%;\n display: inline-block;\n vertical-align: bottom;\n border-radius: var(--n-border-radius);\n min-height: var(--n-height);\n line-height: 1.5;\n font-size: var(--n-font-size);\n ",[p("base-loading","\n color: var(--n-loading-color);\n "),p("base-selection-tags","min-height: var(--n-height);"),h("border, state-border","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border: var(--n-border);\n border-radius: inherit;\n transition:\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n "),h("state-border","\n z-index: 1;\n border-color: #0000;\n "),p("base-suffix","\n cursor: pointer;\n position: absolute;\n top: 50%;\n transform: translateY(-50%);\n right: 10px;\n ",[h("arrow","\n font-size: var(--n-arrow-size);\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n ")]),p("base-selection-overlay","\n display: flex;\n align-items: center;\n white-space: nowrap;\n pointer-events: none;\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n padding: var(--n-padding-single);\n transition: color .3s var(--n-bezier);\n ",[h("wrapper","\n flex-basis: 0;\n flex-grow: 1;\n overflow: hidden;\n text-overflow: ellipsis;\n ")]),p("base-selection-placeholder","\n color: var(--n-placeholder-color);\n ",[h("inner","\n max-width: 100%;\n overflow: hidden;\n ")]),p("base-selection-tags","\n cursor: pointer;\n outline: none;\n box-sizing: border-box;\n position: relative;\n z-index: auto;\n display: flex;\n padding: var(--n-padding-multiple);\n flex-wrap: wrap;\n align-items: center;\n width: 100%;\n vertical-align: bottom;\n background-color: var(--n-color);\n border-radius: inherit;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),p("base-selection-label","\n height: var(--n-height);\n display: inline-flex;\n width: 100%;\n vertical-align: bottom;\n cursor: pointer;\n outline: none;\n z-index: auto;\n box-sizing: border-box;\n position: relative;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: inherit;\n background-color: var(--n-color);\n align-items: center;\n ",[p("base-selection-input","\n font-size: inherit;\n line-height: inherit;\n outline: none;\n cursor: pointer;\n box-sizing: border-box;\n border:none;\n width: 100%;\n padding: var(--n-padding-single);\n background-color: #0000;\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n caret-color: var(--n-caret-color);\n ",[h("content","\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap; \n ")]),h("render-label","\n color: var(--n-text-color);\n ")]),P("disabled",[v("&:hover",[h("state-border","\n box-shadow: var(--n-box-shadow-hover);\n border: var(--n-border-hover);\n ")]),T("focus",[h("state-border","\n box-shadow: var(--n-box-shadow-focus);\n border: var(--n-border-focus);\n ")]),T("active",[h("state-border","\n box-shadow: var(--n-box-shadow-active);\n border: var(--n-border-active);\n "),p("base-selection-label","background-color: var(--n-color-active);"),p("base-selection-tags","background-color: var(--n-color-active);")])]),T("disabled","cursor: not-allowed;",[h("arrow","\n color: var(--n-arrow-color-disabled);\n "),p("base-selection-label","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n ",[p("base-selection-input","\n cursor: not-allowed;\n color: var(--n-text-color-disabled);\n "),h("render-label","\n color: var(--n-text-color-disabled);\n ")]),p("base-selection-tags","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n "),p("base-selection-placeholder","\n cursor: not-allowed;\n color: var(--n-placeholder-color-disabled);\n ")]),p("base-selection-input-tag","\n height: calc(var(--n-height) - 6px);\n line-height: calc(var(--n-height) - 6px);\n outline: none;\n display: none;\n position: relative;\n margin-bottom: 3px;\n max-width: 100%;\n vertical-align: bottom;\n ",[h("input","\n font-size: inherit;\n font-family: inherit;\n min-width: 1px;\n padding: 0;\n background-color: #0000;\n outline: none;\n border: none;\n max-width: 100%;\n overflow: hidden;\n width: 1em;\n line-height: inherit;\n cursor: pointer;\n color: var(--n-text-color);\n caret-color: var(--n-caret-color);\n "),h("mirror","\n position: absolute;\n left: 0;\n top: 0;\n white-space: pre;\n visibility: hidden;\n user-select: none;\n -webkit-user-select: none;\n opacity: 0;\n ")]),["warning","error"].map((e=>T(`${e}-status`,[h("state-border",`border: var(--n-border-${e});`),P("disabled",[v("&:hover",[h("state-border",`\n box-shadow: var(--n-box-shadow-hover-${e});\n border: var(--n-border-hover-${e});\n `)]),T("active",[h("state-border",`\n box-shadow: var(--n-box-shadow-active-${e});\n border: var(--n-border-active-${e});\n `),p("base-selection-label",`background-color: var(--n-color-active-${e});`),p("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),T("focus",[h("state-border",`\n box-shadow: var(--n-box-shadow-focus-${e});\n border: var(--n-border-focus-${e});\n `)])])])))]),p("base-selection-popover","\n margin-bottom: -3px;\n display: flex;\n flex-wrap: wrap;\n margin-right: -8px;\n "),p("base-selection-tag-wrapper","\n max-width: 100%;\n display: inline-flex;\n padding: 0 7px 3px 0;\n ",[v("&:last-child","padding-right: 0;"),p("tag","\n font-size: 14px;\n max-width: 100%;\n ",[h("content","\n line-height: 1.25;\n text-overflow: ellipsis;\n overflow: hidden;\n ")])])]),Ee=e({name:"InternalSelection",props:Object.assign(Object.assign({},f.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const o=n(null),t=n(null),i=n(null),a=n(null),s=n(null),d=n(null),u=n(null),c=n(null),p=n(null),h=n(null),v=n(!1),b=n(!1),g=n(!1),m=f("InternalSelection","-internal-selection",Le,Ie,e,$(e,"clsPrefix")),y=x((()=>e.clearable&&!e.disabled&&(g.value||e.active))),S=x((()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):M(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder)),F=x((()=>{const n=e.selectedOption;if(n)return n[e.labelField]})),z=x((()=>e.multiple?!(!Array.isArray(e.selectedOptions)||!e.selectedOptions.length):null!==e.selectedOption));function O(){var n;const{value:l}=o;if(l){const{value:o}=t;o&&(o.style.width=`${l.offsetWidth}px`,"responsive"!==e.maxTagCount&&(null===(n=p.value)||void 0===n||n.sync()))}}function R(n){const{onPatternInput:o}=e;o&&o(n)}function T(n){!function(n){const{onDeleteOption:o}=e;o&&o(n)}(n)}A($(e,"active"),(e=>{e||function(){const{value:e}=h;e&&(e.style.display="none")}()})),A($(e,"pattern"),(()=>{e.multiple&&r(O)}));const P=n(!1);let k=null;let B=null;function D(){null!==B&&window.clearTimeout(B)}A(z,(e=>{e||(v.value=!1)})),l((()=>{U((()=>{const n=d.value;n&&(n.tabIndex=e.disabled||b.value?-1:0)}))})),ye(i,e.onResize);const{inlineThemeDisabled:I}=e,L=x((()=>{const{size:n}=e,{common:{cubicBezierEaseInOut:o},self:{borderRadius:t,color:l,placeholderColor:r,textColor:i,paddingSingle:a,paddingMultiple:s,caretColor:d,colorDisabled:u,textColorDisabled:c,placeholderColorDisabled:p,colorActive:h,boxShadowFocus:v,boxShadowActive:b,boxShadowHover:f,border:g,borderFocus:x,borderHover:C,borderActive:y,arrowColor:S,arrowColorDisabled:F,loadingColor:z,colorActiveWarning:O,boxShadowFocusWarning:M,boxShadowActiveWarning:R,boxShadowHoverWarning:T,borderWarning:P,borderFocusWarning:k,borderHoverWarning:$,borderActiveWarning:B,colorActiveError:A,boxShadowFocusError:D,boxShadowActiveError:I,boxShadowHoverError:L,borderError:E,borderFocusError:H,borderHoverError:_,borderActiveError:N,clearColor:j,clearColorHover:W,clearColorPressed:V,clearSize:K,arrowSize:U,[w("height",n)]:q,[w("fontSize",n)]:G}}=m.value;return{"--n-bezier":o,"--n-border":g,"--n-border-active":y,"--n-border-focus":x,"--n-border-hover":C,"--n-border-radius":t,"--n-box-shadow-active":b,"--n-box-shadow-focus":v,"--n-box-shadow-hover":f,"--n-caret-color":d,"--n-color":l,"--n-color-active":h,"--n-color-disabled":u,"--n-font-size":G,"--n-height":q,"--n-padding-single":a,"--n-padding-multiple":s,"--n-placeholder-color":r,"--n-placeholder-color-disabled":p,"--n-text-color":i,"--n-text-color-disabled":c,"--n-arrow-color":S,"--n-arrow-color-disabled":F,"--n-loading-color":z,"--n-color-active-warning":O,"--n-box-shadow-focus-warning":M,"--n-box-shadow-active-warning":R,"--n-box-shadow-hover-warning":T,"--n-border-warning":P,"--n-border-focus-warning":k,"--n-border-hover-warning":$,"--n-border-active-warning":B,"--n-color-active-error":A,"--n-box-shadow-focus-error":D,"--n-box-shadow-active-error":I,"--n-box-shadow-hover-error":L,"--n-border-error":E,"--n-border-focus-error":H,"--n-border-hover-error":_,"--n-border-active-error":N,"--n-clear-size":K,"--n-clear-color":j,"--n-clear-color-hover":W,"--n-clear-color-pressed":V,"--n-arrow-size":U}})),E=I?C("internal-selection",x((()=>e.size[0])),L,e):void 0;return{mergedTheme:m,mergedClearable:y,patternInputFocused:b,filterablePlaceholder:S,label:F,selected:z,showTagsPanel:v,isComposing:P,counterRef:u,counterWrapperRef:c,patternInputMirrorRef:o,patternInputRef:t,selfRef:i,multipleElRef:a,singleElRef:s,patternInputWrapperRef:d,overflowRef:p,inputTagElRef:h,handleMouseDown:function(n){e.active&&e.filterable&&n.target!==t.value&&n.preventDefault()},handleFocusin:function(n){var o;n.relatedTarget&&(null===(o=i.value)||void 0===o?void 0:o.contains(n.relatedTarget))||function(n){const{onFocus:o}=e;o&&o(n)}(n)},handleClear:function(n){!function(n){const{onClear:o}=e;o&&o(n)}(n)},handleMouseEnter:function(){g.value=!0},handleMouseLeave:function(){g.value=!1},handleDeleteOption:T,handlePatternKeyDown:function(n){if("Backspace"===n.key&&!P.value&&!e.pattern.length){const{selectedOptions:n}=e;(null==n?void 0:n.length)&&T(n[n.length-1])}},handlePatternInputInput:function(n){const{value:t}=o;if(t){const e=n.target.value;t.textContent=e,O()}e.ignoreComposition&&P.value?k=n:R(n)},handlePatternInputBlur:function(n){var o;b.value=!1,null===(o=e.onPatternBlur)||void 0===o||o.call(e,n)},handlePatternInputFocus:function(n){var o;b.value=!0,null===(o=e.onPatternFocus)||void 0===o||o.call(e,n)},handleMouseEnterCounter:function(){e.disabled||e.active||(D(),B=window.setTimeout((()=>{z.value&&(v.value=!0)}),100))},handleMouseLeaveCounter:function(){D()},handleFocusout:function(n){var o;(null===(o=i.value)||void 0===o?void 0:o.contains(n.relatedTarget))||function(n){const{onBlur:o}=e;o&&o(n)}(n)},handleCompositionEnd:function(){P.value=!1,e.ignoreComposition&&R(k),k=null},handleCompositionStart:function(){P.value=!0},onPopoverUpdateShow:function(e){e||(D(),v.value=!1)},focus:function(){var n,o,t;e.filterable?(b.value=!1,null===(n=d.value)||void 0===n||n.focus()):e.multiple?null===(o=a.value)||void 0===o||o.focus():null===(t=s.value)||void 0===t||t.focus()},focusInput:function(){const{value:e}=t;e&&(!function(){const{value:e}=h;e&&(e.style.display="inline-block")}(),e.focus())},blur:function(){var n,o;if(e.filterable)b.value=!1,null===(n=d.value)||void 0===n||n.blur(),null===(o=t.value)||void 0===o||o.blur();else if(e.multiple){const{value:e}=a;null==e||e.blur()}else{const{value:e}=s;null==e||e.blur()}},blurInput:function(){const{value:e}=t;e&&e.blur()},updateCounter:function(e){const{value:n}=u;n&&n.setTextContent(`+${e}`)},getCounter:function(){const{value:e}=c;return e},getTail:function(){return t.value},renderLabel:e.renderLabel,cssVars:I?void 0:L,themeClass:null==E?void 0:E.themeClass,onRender:null==E?void 0:E.onRender}},render(){const{status:e,multiple:n,size:o,disabled:t,filterable:l,maxTagCount:r,bordered:a,clsPrefix:s,onRender:d,renderTag:u,renderLabel:c}=this;null==d||d();const p="responsive"===r,h="number"==typeof r,v=p||h,b=i(q,null,{default:()=>i(he,{clsPrefix:s,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var e,n;return null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)}})});let f;if(n){const{labelField:e}=this,n=n=>i("div",{class:`${s}-base-selection-tag-wrapper`,key:n.value},u?u({option:n,handleClose:()=>this.handleDeleteOption(n)}):i(G,{size:o,closable:!n.disabled,disabled:t,onClose:()=>this.handleDeleteOption(n),internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>c?c(n,!0):M(n[e],n,!0)})),a=()=>(h?this.selectedOptions.slice(0,r):this.selectedOptions).map(n),d=l?i("div",{class:`${s}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},i("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:t,value:this.pattern,autofocus:this.autofocus,class:`${s}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),i("span",{ref:"patternInputMirrorRef",class:`${s}-base-selection-input-tag__mirror`},this.pattern)):null,g=p?()=>i("div",{class:`${s}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},i(G,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:t})):void 0;let m;if(h){const e=this.selectedOptions.length-r;e>0&&(m=i("div",{class:`${s}-base-selection-tag-wrapper`,key:"__counter__"},i(G,{size:o,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:t},{default:()=>`+${e}`})))}const x=p?l?i(Ce,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:a,counter:g,tail:()=>d}):i(Ce,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:a,counter:g}):h?a().concat(m):a(),w=v?()=>i("div",{class:`${s}-base-selection-popover`},p?a():this.selectedOptions.map(n)):void 0,C=v?{show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover}:null,y=!this.selected&&(!this.active||!this.pattern&&!this.isComposing)?i("div",{class:`${s}-base-selection-placeholder ${s}-base-selection-overlay`},i("div",{class:`${s}-base-selection-placeholder__inner`},this.placeholder)):null,S=l?i("div",{ref:"patternInputWrapperRef",class:`${s}-base-selection-tags`},x,p?null:d,b):i("div",{ref:"multipleElRef",class:`${s}-base-selection-tags`,tabindex:t?void 0:0},x,b);f=i(J,null,v?i(Z,Object.assign({},C,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>S,default:w}):S,y)}else if(l){const e=this.pattern||this.isComposing,n=this.active?!e:!this.selected,o=!this.active&&this.selected;f=i("div",{ref:"patternInputWrapperRef",class:`${s}-base-selection-label`},i("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${s}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:t,disabled:t,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),o?i("div",{class:`${s}-base-selection-label__render-label ${s}-base-selection-overlay`,key:"input"},i("div",{class:`${s}-base-selection-overlay__wrapper`},u?u({option:this.selectedOption,handleClose:()=>{}}):c?c(this.selectedOption,!0):M(this.label,this.selectedOption,!0))):null,n?i("div",{class:`${s}-base-selection-placeholder ${s}-base-selection-overlay`,key:"placeholder"},i("div",{class:`${s}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,b)}else f=i("div",{ref:"singleElRef",class:`${s}-base-selection-label`,tabindex:this.disabled?void 0:0},void 0!==this.label?i("div",{class:`${s}-base-selection-input`,title:ge(this.label),key:"input"},i("div",{class:`${s}-base-selection-input__content`},u?u({option:this.selectedOption,handleClose:()=>{}}):c?c(this.selectedOption,!0):M(this.label,this.selectedOption,!0))):i("div",{class:`${s}-base-selection-placeholder ${s}-base-selection-overlay`,key:"placeholder"},i("div",{class:`${s}-base-selection-placeholder__inner`},this.placeholder)),b);return i("div",{ref:"selfRef",class:[`${s}-base-selection`,this.themeClass,e&&`${s}-base-selection--${e}-status`,{[`${s}-base-selection--active`]:this.active,[`${s}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${s}-base-selection--disabled`]:this.disabled,[`${s}-base-selection--multiple`]:this.multiple,[`${s}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},f,a?i("div",{class:`${s}-base-selection__border`}):null,a?i("div",{class:`${s}-base-selection__state-border`}):null)}});function He(e){return"group"===e.type}function _e(e){return"ignored"===e.type}function Ne(e,n){try{return!!(1+n.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch(o){return!1}}function je(e,n){return{getIsGroup:He,getIgnored:_e,getKey:n=>He(n)?n.name||n.key||"key-required":n[e],getChildren:e=>e[n]}}const We=S({name:"Select",common:c,peers:{InternalSelection:Ie,InternalSelectMenu:Pe},self:function(e){const{boxShadow2:n}=e;return{menuBoxShadow:n}}}),Ve=v([p("select","\n z-index: auto;\n outline: none;\n width: 100%;\n position: relative;\n "),p("select-menu","\n margin: 4px 0;\n box-shadow: var(--n-menu-box-shadow);\n ",[k({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),Ke=e({name:"Select",props:Object.assign(Object.assign({},f.props),{to:oe.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),setup(e){const{mergedClsPrefixRef:o,mergedBorderedRef:t,namespaceRef:l,inlineThemeDisabled:r}=b(e),i=f("Select","-select",Ve,We,e,o),a=n(e.defaultValue),s=$(e,"value"),d=Q(s,a),u=n(!1),c=n(""),p=x((()=>{const{valueField:n,childrenField:o}=e,t=je(n,o);return Y(D.value,t)})),h=x((()=>function(e,n,o){const t=new Map;return e.forEach((e=>{He(e)?e[o].forEach((e=>{t.set(e[n],e)})):t.set(e[n],e)})),t}(k.value,e.valueField,e.childrenField))),v=n(!1),g=Q($(e,"show"),v),m=n(null),w=n(null),y=n(null),{localeRef:S}=pe("Select"),F=x((()=>{var n;return null!==(n=e.placeholder)&&void 0!==n?n:S.value.placeholder})),z=X(e,["items","options"]),O=[],M=n([]),R=n([]),T=n(new Map),P=x((()=>{const{fallbackOption:n}=e;if(void 0===n){const{labelField:n,valueField:o}=e;return e=>({[n]:String(e),[o]:e})}return!1!==n&&(e=>Object.assign(n(e),{value:e}))})),k=x((()=>R.value.concat(M.value).concat(z.value))),B=x((()=>{const{filter:n}=e;if(n)return n;const{labelField:o,valueField:t}=e;return(e,n)=>{if(!n)return!1;const l=n[o];if("string"==typeof l)return Ne(e,l);const r=n[t];return"string"==typeof r?Ne(e,r):"number"==typeof r&&Ne(e,String(r))}})),D=x((()=>{if(e.remote)return z.value;{const{value:n}=k,{value:o}=c;return o.length&&e.filterable?function(e,n,o,t){return n?function e(l){if(!Array.isArray(l))return[];const r=[];for(const i of l)if(He(i)){const n=e(i[t]);n.length&&r.push(Object.assign({},i,{[t]:n}))}else{if(_e(i))continue;n(o,i)&&r.push(i)}return r}(e):e}(n,B.value,o,e.childrenField):n}}));function I(n){const o=e.remote,{value:t}=T,{value:l}=h,{value:r}=P,i=[];return n.forEach((e=>{if(l.has(e))i.push(l.get(e));else if(o&&t.has(e))i.push(t.get(e));else if(r){const n=r(e);n&&i.push(n)}})),i}const L=x((()=>{if(e.multiple){const{value:e}=d;return Array.isArray(e)?I(e):[]}return null})),E=x((()=>{const{value:n}=d;return e.multiple||Array.isArray(n)||null===n?null:I([n])[0]||null})),H=ee(e),{mergedSizeRef:_,mergedDisabledRef:N,mergedStatusRef:j}=H;function V(n,o){const{onChange:t,"onUpdate:value":l,onUpdateValue:r}=e,{nTriggerFormChange:i,nTriggerFormInput:s}=H;t&&ce(t,n,o),r&&ce(r,n,o),l&&ce(l,n,o),a.value=n,i(),s()}function K(n){const{onBlur:o}=e,{nTriggerFormBlur:t}=H;o&&ce(o,n),t()}function U(){var n;const{remote:o,multiple:t}=e;if(o){const{value:o}=T;if(t){const{valueField:t}=e;null===(n=L.value)||void 0===n||n.forEach((e=>{o.set(e[t],e)}))}else{const n=E.value;n&&o.set(n[e.valueField],n)}}}function q(n){const{onUpdateShow:o,"onUpdate:show":t}=e;o&&ce(o,n),t&&ce(t,n),v.value=n}function G(){N.value||(q(!0),v.value=!0,e.filterable&&he())}function Z(){q(!1)}function J(){c.value="",R.value=O}const te=n(!1);function le(e){re(e.rawNode)}function re(n){if(N.value)return;const{tag:o,remote:t,clearFilterAfterSelect:l,valueField:r}=e;if(o&&!t){const{value:e}=R,n=e[0]||null;if(n){const e=M.value;e.length?e.push(n):M.value=[n],R.value=O}}if(t&&T.value.set(n[r],n),e.multiple){const i=function(n){if(!Array.isArray(n))return[];if(P.value)return Array.from(n);{const{remote:o}=e,{value:t}=h;if(o){const{value:e}=T;return n.filter((n=>t.has(n)||e.has(n)))}return n.filter((e=>t.has(e)))}}(d.value),a=i.findIndex((e=>e===n[r]));if(~a){if(i.splice(a,1),o&&!t){const e=ie(n[r]);~e&&(M.value.splice(e,1),l&&(c.value=""))}}else i.push(n[r]),l&&(c.value="");V(i,I(i))}else{if(o&&!t){const e=ie(n[r]);M.value=~e?[M.value[e]]:O}se(),Z(),V(n[r],n)}}function ie(n){return M.value.findIndex((o=>o[e.valueField]===n))}function ae(n){var o,t,l,r,i;switch(n.key){case" ":if(e.filterable)break;n.preventDefault();case"Enter":if(!(null===(o=m.value)||void 0===o?void 0:o.isComposing))if(g.value){const n=null===(t=y.value)||void 0===t?void 0:t.getPendingTmNode();n?le(n):e.filterable||(Z(),se())}else if(G(),e.tag&&te.value){const n=R.value[0];if(n){const o=n[e.valueField],{value:t}=d;e.multiple&&Array.isArray(t)&&t.some((e=>e===o))||re(n)}}n.preventDefault();break;case"ArrowUp":if(n.preventDefault(),e.loading)return;g.value&&(null===(l=y.value)||void 0===l||l.prev());break;case"ArrowDown":if(n.preventDefault(),e.loading)return;g.value?null===(r=y.value)||void 0===r||r.next():G();break;case"Escape":g.value&&(ue(n),Z()),null===(i=m.value)||void 0===i||i.focus()}}function se(){var e;null===(e=m.value)||void 0===e||e.focus()}function he(){var e;null===(e=m.value)||void 0===e||e.focusInput()}U(),A($(e,"options"),U);const ve={focus:()=>{var e;null===(e=m.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=m.value)||void 0===e||e.blur()}},be=x((()=>{const{self:{menuBoxShadow:e}}=i.value;return{"--n-menu-box-shadow":e}})),fe=r?C("select",void 0,be,e):void 0;return Object.assign(Object.assign({},ve),{mergedStatus:j,mergedClsPrefix:o,mergedBordered:t,namespace:l,treeMate:p,isMounted:ne(),triggerRef:m,menuRef:y,pattern:c,uncontrolledShow:v,mergedShow:g,adjustedTo:oe(e),uncontrolledValue:a,mergedValue:d,followerRef:w,localizedPlaceholder:F,selectedOption:E,selectedOptions:L,mergedSize:_,mergedDisabled:N,focused:u,activeWithoutMenuOpen:te,inlineThemeDisabled:r,onTriggerInputFocus:function(){e.filterable&&(te.value=!0)},onTriggerInputBlur:function(){e.filterable&&(te.value=!1,g.value||J())},handleTriggerOrMenuResize:function(){var e;g.value&&(null===(e=w.value)||void 0===e||e.syncPosition())},handleMenuFocus:function(e){u.value=!0},handleMenuBlur:function(e){var n;(null===(n=m.value)||void 0===n?void 0:n.$el.contains(e.relatedTarget))||(u.value=!1,K(e),Z())},handleMenuTabOut:function(){var e;null===(e=m.value)||void 0===e||e.focus(),Z()},handleTriggerClick:function(){N.value||(g.value?e.filterable?he():Z():G())},handleToggle:le,handleDeleteOption:re,handlePatternInput:function(n){g.value||G();const{value:o}=n.target;c.value=o;const{tag:t,remote:l}=e;if(function(n){const{onSearch:o}=e;o&&ce(o,n)}(o),t&&!l){if(!o)return void(R.value=O);const{onCreate:n}=e,t=n?n(o):{[e.labelField]:o,[e.valueField]:o},{valueField:l}=e;z.value.some((e=>e[l]===t[l]))||M.value.some((e=>e[l]===t[l]))?R.value=O:R.value=[t]}},handleClear:function(n){n.stopPropagation();const{multiple:o}=e;!o&&e.filterable&&Z(),function(){const{onClear:n}=e;n&&ce(n)}(),o?V([],[]):V(null,null)},handleTriggerBlur:function(e){var n,o;(null===(o=null===(n=y.value)||void 0===n?void 0:n.selfRef)||void 0===o?void 0:o.contains(e.relatedTarget))||(u.value=!1,K(e),Z())},handleTriggerFocus:function(n){!function(n){const{onFocus:o}=e,{nTriggerFormFocus:t}=H;o&&ce(o,n),t()}(n),u.value=!0},handleKeydown:ae,handleMenuAfterLeave:J,handleMenuClickOutside:function(e){var n;g.value&&((null===(n=m.value)||void 0===n?void 0:n.$el.contains(de(e)))||Z())},handleMenuScroll:function(n){!function(n){const{onScroll:o}=e;o&&ce(o,n)}(n)},handleMenuKeydown:ae,handleMenuMousedown:function(e){W(e,"action")||W(e,"empty")||e.preventDefault()},mergedTheme:i,cssVars:r?void 0:be,themeClass:null==fe?void 0:fe.themeClass,onRender:null==fe?void 0:fe.onRender})},render(){return i("div",{class:`${this.mergedClsPrefix}-select`},i(te,null,{default:()=>[i(le,null,{default:()=>i(Ee,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,n;return[null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)]}})}),i(re,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===oe.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>i(R,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n,o;return this.mergedShow||"show"===this.displayDirective?(null===(e=this.onRender)||void 0===e||e.call(this),ie(i(Ae,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,null===(n=this.menuProps)||void 0===n?void 0:n.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[null===(o=this.menuProps)||void 0===o?void 0:o.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var e,n;return[null===(n=(e=this.$slots).empty)||void 0===n?void 0:n.call(e)]},action:()=>{var e,n;return[null===(n=(e=this.$slots).action)||void 0===n?void 0:n.call(e)]}}),"show"===this.displayDirective?[[ae,this.mergedShow],[se,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[se,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}});export{Ae as N,Ke as _,fe as a,Re as b,je as c,Oe as e,Pe as i,me as m,We as s};
